<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.peanut.dao.UserDao">
    <cache type="com.peanut.util.RedisCache"/>
    <!--<cache type="org.mybatis.caches.ehcache.EhcacheCache">
        <property name="timeToIdleSeconds" value="20"></property>&lt;!&ndash;<!–当缓存闲置60秒后销毁–>&ndash;&gt;
        <property name="timeToLiveSeconds" value="120"></property>&lt;!&ndash;<!–缓存存在160秒后销毁–>&ndash;&gt;
        <property name="maxEntriesLocalHeap" value="1000"></property>
        <property name="maxEntriesLocalDisk" value="10000000"></property>
        <property name="memoryStoreEvictionPolicy" value="LRU"></property>
    </cache>-->

    <select id="secbyphone" parameterType="java.lang.String" resultType="Integer" flushCache="true" >
        select count(1) from USER  where phone=#{phone}
    </select>

    <select id="seubyphone" parameterType="java.lang.String" resultType="User" flushCache="true" >
        select * from USER  where phone=#{phone}
    </select>

    <select id="sebyname" parameterType="map" resultType="User" flushCache="true">
        SELECT * FROM USER WHERE username =#{username} and password=#{password}
    </select>

    <insert id="intuser" parameterType="User">
        INSERT INTO USER(username,PASSWORD,phone,LEVEL,STATUS,name,address) VALUES(#{username},#{password},#{phone},#{level},#{status},#{name},#{address})
    </insert>

    <update id="updateU" parameterType="User">
        UPDATE  USER SET username=#{username},phone=#{phone},PASSWORD=#{password},address=#{address},name=#{name} WHERE uid=#{uid}
    </update>

    <update id="updateT" parameterType="User">
        UPDATE USER SET touxiangpath=#{touXiangPath} where uid=#{uid}
    </update>
</mapper>